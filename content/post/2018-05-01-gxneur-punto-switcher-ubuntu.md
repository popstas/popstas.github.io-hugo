+++
title = "Настройка gxneur в Ubuntu 18.04"
date = "2018-05-01T05:35:00+06:00"
slug = "gxneur-punto-switcher-ubuntu"
tags = ["ubuntu desktop", "18.04"]
+++

Для тех, кто не может жить без Punto Switcher, у меня плохие новости: нормальной замены на Ubuntu нет, на форуме люди говорят, что у кого-то работает идеально, я с 10.04 пробую, никогда идеально не было. Будем настраивать то, что есть.

{{< mainimg src="https://upload.wikimedia.org/wikipedia/ru/a/a3/Xneur_project.png" >}}

<!--more-->

В 18.04 на данный момент последняя версия xneur, 0.20, ставим ее, а также aspell-ru, как [советуют](http://forum.ubuntu.ru/index.php?topic=165332.msg2337661#msg2337661) на форуме:

```
apt install gxneur aspell-ru
```

Добавляем в автозагрузку /usr/bin/gxneur

Программа использует старые AppIndicators, с которыми постоянно происходят глюки. Новый LTS не стал исключением, после запуска вы не увидите иконки в трее. Это исправляется установкой расширения [TopIcons](https://extensions.gnome.org/extension/495/topicons/) ([спасибо](https://askubuntu.com/questions/1028901/no-appindicators-after-upgrading-from-17-10-to-18-04/1029308#1029308)).

В верхней панели должна появиться иконка. Через нее попадаем в параметры. Что я настраиваю:

- Общее: Включить ручной режим переключения (даже он работает плохо)
- Раскладки: у меня было 2 ru раскладки, ~~отключил одну~~ включил назад, т.к. после перезагрузки блокируется обе ru раскладки. Это решилось командой `sudo setxkbmap -layout 'us,ru'`
- Раскладки: убрать галочку “Запоминать раскладки для каждого приложения”, если в системе они у вас глобальные (по умолчанию глобальные)
- Раскладки: добавить в исключения приложения, где работать будет точно плохо, у меня там проходы в другие системы: Wine, Remmina, VirtualBox
- Параметры: установить расширение для перемещения иконки в область Gnome 3

Дальше по вкусу, я еще настраиваю переключение ~~по Caps Lock~~ по Alt_L, вроде получше работает, отключаю автодополнение, отключаю звуки.

Перемещение иконки не сработало, TopIcons все равно нужен.

Работает приложение через раз или реже, первый раз еще переключает, дальше как повезет. После перезапуска еще раз переключает.

Проблема в том, как Ubuntu работает с раскладками, судя по [этому комменту](http://forum.ubuntu.ru/index.php?topic=165332.msg1940624#msg1940624). Помнится, я на 14.04 и может на 16.04 уже натыкался на это.

С тех пор я стал переключать раскладку по Super+Space, похоже, что это влияет: если переключать по Alt+Shift, то срабатывает вроде как чаще. Поэтому я поменял настройку, выключив вообще Alt+Shift:

```
gsettings set org.gnome.desktop.input-sources xkb-options "['grp:super_space_toggle,grp_led:scroll']"
```

Пока живу так, лучше, чем ничего.

Статья из [цикла "Переезд на Ubuntu 18.04"](/blog/2018/04/30/windows-ubuntu-18.04-migrate/).
